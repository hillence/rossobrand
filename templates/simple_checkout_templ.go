// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.960
package templates

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

import (
	"fmt"
	"gogo/database"
	"strconv"
	"strings"
)

func SimpleCheckout(user *database.User, address string, items []*database.CartItem, cartCountLabel string, cartTotal string, isAuthenticated bool) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<html><head><title>Оформление заказа</title><meta charset=\"utf-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"><link rel=\"stylesheet\" href=\"/static/style.css\"><script src=\"/static/htmx.min.js\"></script></head><body>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = Header(isAuthenticated, false).Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 2, "<main class=\"simple-checkout\" data-user-address=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var2 string
		templ_7745c5c3_Var2, templ_7745c5c3_Err = templ.JoinStringErrs(address)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 21, Col: 69}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var2))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 3, "\"><div class=\"container\"><section class=\"simple-checkout__section\"><div class=\"simple-checkout__layout\"><div class=\"simple-checkout__main\"><header class=\"simple-checkout__header\"><div class=\"simple-checkout__header-row\"><h1 class=\"simple-checkout__title\">выберите способ доставки</h1></div>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if address != "" {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 4, "<p class=\"simple-checkout__address\">доставка по адресу <strong>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			var templ_7745c5c3_Var3 string
			templ_7745c5c3_Var3, templ_7745c5c3_Err = templ.JoinStringErrs(address)
			if templ_7745c5c3_Err != nil {
				return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 31, Col: 119}
			}
			_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var3))
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 5, "</strong></p>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 6, "</header><div class=\"simple-checkout__options\"><button type=\"button\" class=\"delivery-option\" data-delivery=\"pickup\" data-delivery-label=\"Пункт выдачи\" aria-pressed=\"false\"><span class=\"delivery-option__label\">пункт выдачи</span> <span class=\"delivery-option__price\">0 RUB</span></button> <button type=\"button\" class=\"delivery-option\" data-delivery=\"courier\" data-delivery-label=\"Курьер\" aria-pressed=\"false\"><span class=\"delivery-option__label\">курьер</span> <span class=\"delivery-option__price\">0 RUB</span></button> <button type=\"button\" class=\"delivery-option\" data-delivery=\"post\" data-delivery-label=\"Почта России\" aria-pressed=\"false\"><span class=\"delivery-option__label\">почта россии</span> <span class=\"delivery-option__price\">0 RUB</span></button></div><div class=\"simple-checkout__content\"><div class=\"simple-checkout__forms\"><h2 class=\"simple-checkout__forms-title\">заполните личные данные</h2><form class=\"delivery-form delivery-form--pickup\" data-delivery-form=\"pickup\" hidden><div class=\"delivery-form__grid\"><div class=\"form-field\"><label class=\"form-label\" for=\"pickup-point\">пункт выдачи</label> <button type=\"button\" class=\"delivery-form__selector\" id=\"pickup-point\">выбрать пункт выдачи</button> <input type=\"hidden\" id=\"pickup-point-value\" data-pickup-value><p class=\"delivery-form__hint\" data-pickup-selected>пункт выдачи не выбран</p></div><div class=\"form-field\"><label class=\"form-label\" for=\"pickup-phone\">телефон</label> <input class=\"form-input\" id=\"pickup-phone\" type=\"tel\" placeholder=\"+7 (___) ___-__-__\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var4 string
		templ_7745c5c3_Var4, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.Phone)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 66, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var4))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 7, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"pickup-first-name\">имя</label> <input class=\"form-input\" id=\"pickup-first-name\" type=\"text\" placeholder=\"Введите имя\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var5 string
		templ_7745c5c3_Var5, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.FirstName)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 75, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var5))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 8, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"pickup-last-name\">фамилия</label> <input class=\"form-input\" id=\"pickup-last-name\" type=\"text\" placeholder=\"Введите фамилию\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var6 string
		templ_7745c5c3_Var6, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.LastName)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 84, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var6))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 9, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"pickup-email\">почта</label> <input class=\"form-input\" id=\"pickup-email\" type=\"email\" placeholder=\"Введите email\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var7 string
		templ_7745c5c3_Var7, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.Email)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 93, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var7))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 10, "\"></div></div></form><form class=\"delivery-form delivery-form--courier\" data-delivery-form=\"courier\" hidden><div class=\"delivery-form__grid\"><div class=\"form-field form-field--full\"><label class=\"form-label\" for=\"courier-address\">Адрес доставки</label> <input class=\"form-input\" id=\"courier-address\" type=\"text\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var8 string
		templ_7745c5c3_Var8, templ_7745c5c3_Err = templ.JoinStringErrs(address)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 101, Col: 118}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var8))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 11, "\" placeholder=\"Введите адрес\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-index\">Индекс</label> <input class=\"form-input\" id=\"courier-index\" type=\"text\" placeholder=\"Индекс\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-apartment\">Квартира / офис</label> <input class=\"form-input\" id=\"courier-apartment\" type=\"text\" placeholder=\"Например, 12\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-entrance\">Подъезд</label> <input class=\"form-input\" id=\"courier-entrance\" type=\"text\" placeholder=\"Подъезд\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-floor\">Этаж</label> <input class=\"form-input\" id=\"courier-floor\" type=\"text\" placeholder=\"Этаж\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-intercom\">Домофон</label> <input class=\"form-input\" id=\"courier-intercom\" type=\"text\" placeholder=\"Код домофона\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-phone\">Телефон</label> <input class=\"form-input\" id=\"courier-phone\" type=\"tel\" placeholder=\"+7 (___) ___-__-__\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var9 string
		templ_7745c5c3_Var9, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.Phone)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 130, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var9))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 12, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-first-name\">Имя</label> <input class=\"form-input\" id=\"courier-first-name\" type=\"text\" placeholder=\"Введите имя\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var10 string
		templ_7745c5c3_Var10, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.FirstName)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 139, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var10))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 13, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-last-name\">Фамилия</label> <input class=\"form-input\" id=\"courier-last-name\" type=\"text\" placeholder=\"Введите фамилию\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var11 string
		templ_7745c5c3_Var11, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.LastName)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 148, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var11))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 14, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"courier-email\">Email</label> <input class=\"form-input\" id=\"courier-email\" type=\"email\" placeholder=\"Введите email\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var12 string
		templ_7745c5c3_Var12, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.Email)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 157, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var12))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 15, "\"></div></div></form><form class=\"delivery-form delivery-form--post\" data-delivery-form=\"post\" hidden><div class=\"delivery-form__grid\"><div class=\"form-field form-field--full\"><label class=\"form-label\" for=\"post-address\">Адрес доставки</label> <input class=\"form-input\" id=\"post-address\" type=\"text\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var13 string
		templ_7745c5c3_Var13, templ_7745c5c3_Err = templ.JoinStringErrs(address)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 165, Col: 115}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var13))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 16, "\" placeholder=\"Введите адрес\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"post-index\">Индекс</label> <input class=\"form-input\" id=\"post-index\" type=\"text\" placeholder=\"Индекс\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"post-phone\">Телефон</label> <input class=\"form-input\" id=\"post-phone\" type=\"tel\" placeholder=\"+7 (___) ___-__-__\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var14 string
		templ_7745c5c3_Var14, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.Phone)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 178, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var14))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 17, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"post-first-name\">Имя</label> <input class=\"form-input\" id=\"post-first-name\" type=\"text\" placeholder=\"Введите имя\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var15 string
		templ_7745c5c3_Var15, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.FirstName)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 187, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var15))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 18, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"post-last-name\">Фамилия</label> <input class=\"form-input\" id=\"post-last-name\" type=\"text\" placeholder=\"Введите фамилию\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var16 string
		templ_7745c5c3_Var16, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.LastName)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 196, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var16))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 19, "\"></div><div class=\"form-field\"><label class=\"form-label\" for=\"post-email\">Email</label> <input class=\"form-input\" id=\"post-email\" type=\"email\" placeholder=\"Введите email\" value=\"")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var17 string
		templ_7745c5c3_Var17, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
			if user == nil {
				return ""
			}
			return strings.TrimSpace(user.Email)
		}())
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 205, Col: 47}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var17))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 20, "\"></div></div></form></div></div></div><aside class=\"simple-checkout__summary\"><form class=\"order-summary\" method=\"post\" action=\"/orders/create\" data-order-submit-form><h2 class=\"order-summary__title\">ваш заказ:</h2><p class=\"order-summary__meta\">всего — <span data-summary-count>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var18 string
		templ_7745c5c3_Var18, templ_7745c5c3_Err = templ.JoinStringErrs(cartCountLabel)
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 215, Col: 123}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var18))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 21, "</span></p><div class=\"order-summary__items\">")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		if len(items) == 0 {
			templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 22, "<p class=\"order-summary__empty\">в корзине нет товаров.</p>")
			if templ_7745c5c3_Err != nil {
				return templ_7745c5c3_Err
			}
		} else {
			for _, item := range items {
				if item != nil && item.Product != nil {
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 23, "<div class=\"order-summary__item\"><div class=\"order-summary__item-thumb\">")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					if image := item.Product.PrimaryImage(); image != "" {
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 24, "<img src=\"")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						var templ_7745c5c3_Var19 string
						templ_7745c5c3_Var19, templ_7745c5c3_Err = templ.JoinStringErrs(image)
						if templ_7745c5c3_Err != nil {
							return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 225, Col: 80}
						}
						_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var19))
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 25, "\" alt=\"")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						var templ_7745c5c3_Var20 string
						templ_7745c5c3_Var20, templ_7745c5c3_Err = templ.JoinStringErrs(item.Product.Name)
						if templ_7745c5c3_Err != nil {
							return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 225, Col: 106}
						}
						_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var20))
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 26, "\">")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
					} else {
						templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 27, "<div class=\"order-summary__item-placeholder\" aria-hidden=\"true\"></div>")
						if templ_7745c5c3_Err != nil {
							return templ_7745c5c3_Err
						}
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 28, "</div><div class=\"order-summary__item-body\"><div class=\"order-summary__item-row\"><p class=\"order-summary__item-name\">")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var21 string
					templ_7745c5c3_Var21, templ_7745c5c3_Err = templ.JoinStringErrs(item.Product.Name)
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 232, Col: 119}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var21))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 29, "</p><p class=\"order-summary__item-price\">")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var22 string
					templ_7745c5c3_Var22, templ_7745c5c3_Err = templ.JoinStringErrs(func() string {
						value := strings.TrimRight(strings.TrimRight(strconv.FormatFloat(item.Product.Price, 'f', 2, 64), "0"), ".")
						if value == "" {
							value = "0"
						}
						return fmt.Sprintf("%s RUB", value)
					}())
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 239, Col: 67}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var22))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 30, "</p></div><p class=\"order-summary__item-qty\">количество: ")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					var templ_7745c5c3_Var23 string
					templ_7745c5c3_Var23, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%d шт.", item.Quantity))
					if templ_7745c5c3_Err != nil {
						return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 241, Col: 157}
					}
					_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var23))
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
					templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 31, "</p></div></div>")
					if templ_7745c5c3_Err != nil {
						return templ_7745c5c3_Err
					}
				}
			}
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 32, "</div><div class=\"order-summary__promo\"><label class=\"order-summary__promo-label\" for=\"order-promo\">промокод:</label><div class=\"order-summary__promo-row\"><input id=\"order-promo\" class=\"order-summary__promo-input\" type=\"text\" placeholder=\"Введите промокод\"> <button type=\"button\" class=\"order-summary__promo-apply\">применить</button></div></div><div class=\"order-summary__totals\"><div class=\"order-summary__line\"><span>товары:</span> <span data-summary-amount>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var24 string
		templ_7745c5c3_Var24, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%s RUB", cartTotal))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 258, Col: 100}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var24))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 33, "</span></div><div class=\"order-summary__line order-summary__line--grand\"><span>итого:</span> <span data-summary-total>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		var templ_7745c5c3_Var25 string
		templ_7745c5c3_Var25, templ_7745c5c3_Err = templ.JoinStringErrs(fmt.Sprintf("%s RUB", cartTotal))
		if templ_7745c5c3_Err != nil {
			return templ.Error{Err: templ_7745c5c3_Err, FileName: `templates/simple_checkout.templ`, Line: 262, Col: 99}
		}
		_, templ_7745c5c3_Err = templ_7745c5c3_Buffer.WriteString(templ.EscapeString(templ_7745c5c3_Var25))
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 34, "</span></div></div><input type=\"hidden\" name=\"delivery_type\" value=\"pickup\" data-delivery-type-input> <input type=\"hidden\" name=\"pickup_point\" data-pickup-submit-value> <input type=\"hidden\" name=\"first_name\" data-order-first-name> <input type=\"hidden\" name=\"last_name\" data-order-last-name> <input type=\"hidden\" name=\"email\" data-order-email> <input type=\"hidden\" name=\"phone\" data-order-phone> <input type=\"hidden\" name=\"address\" data-order-address-input> <button type=\"submit\" class=\"order-summary__submit\">оформить заказ</button></form></aside></div></section></div></main>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = Banner().Render(ctx, templ_7745c5c3_Buffer)
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 35, "<div class=\"pickup-map\" data-pickup-map hidden aria-hidden=\"true\"><div class=\"pickup-map__backdrop\" data-pickup-map-close aria-hidden=\"true\"></div><div class=\"pickup-map__dialog\" role=\"dialog\" aria-modal=\"true\"><button type=\"button\" class=\"pickup-map__close\" data-pickup-map-close aria-label=\"Закрыть карту\"><span aria-hidden=\"true\">&times;</span></button><div class=\"pickup-map__canvas\" data-pickup-map-canvas></div></div></div><script>\n                (function () {\n                    var doc = document;\n                    var body = doc.body;\n                    var deliveryButtons = doc.querySelectorAll('[data-delivery]');\n                    var deliveryForms = doc.querySelectorAll('[data-delivery-form]');\n                    var deliveryTypeInput = doc.querySelector('[data-delivery-type-input]');\n                    var pickupTrigger = doc.querySelector('#pickup-point');\n                    var pickupTriggerDefault = pickupTrigger ? pickupTrigger.textContent : '';\n                    var pickupValueField = doc.querySelector('[data-pickup-value]');\n                    var pickupSubmitInput = doc.querySelector('[data-pickup-submit-value]');\n                    var pickupSelectedText = doc.querySelector('[data-pickup-selected]');\n                    var pickupSelectedDefault = pickupSelectedText ? pickupSelectedText.textContent : '';\n                    var orderForm = doc.querySelector('[data-order-submit-form]');\n                    var orderFirstNameInput = doc.querySelector('[data-order-first-name]');\n                    var orderLastNameInput = doc.querySelector('[data-order-last-name]');\n                    var orderEmailInput = doc.querySelector('[data-order-email]');\n                    var orderPhoneInput = doc.querySelector('[data-order-phone]');\n                    var orderAddressInput = doc.querySelector('[data-order-address-input]');\n                    var pickupFirstNameInput = doc.querySelector('#pickup-first-name');\n                    var pickupLastNameInput = doc.querySelector('#pickup-last-name');\n                    var pickupEmailInput = doc.querySelector('#pickup-email');\n                    var pickupPhoneInput = doc.querySelector('#pickup-phone');\n                    var courierFirstNameInput = doc.querySelector('#courier-first-name');\n                    var courierLastNameInput = doc.querySelector('#courier-last-name');\n                    var courierEmailInput = doc.querySelector('#courier-email');\n                    var courierPhoneInput = doc.querySelector('#courier-phone');\n                    var courierAddressInput = doc.querySelector('#courier-address');\n                    var postFirstNameInput = doc.querySelector('#post-first-name');\n                    var postLastNameInput = doc.querySelector('#post-last-name');\n                    var postEmailInput = doc.querySelector('#post-email');\n                    var postPhoneInput = doc.querySelector('#post-phone');\n                    var postAddressInput = doc.querySelector('#post-address');\n                    var mapOverlay = doc.querySelector('[data-pickup-map]');\n                    var mapCanvas = doc.querySelector('[data-pickup-map-canvas]');\n                    var mapCloseElements = doc.querySelectorAll('[data-pickup-map-close]');\n                    var mapScriptLoading = false;\n                    var mapInstance = null;\n                    var objectManager = null;\n                    var allPickupPoints = null;\n                    var filteredPickupFeatures = [];\n                    var selectedPointId = null;\n                    var defaultCenter = [55.751244, 37.618423];\n                    var defaultZoom = 4.5;\n                    var modalClass = 'body--modal-open';\n                    var checkoutRoot = doc.querySelector('.simple-checkout');\n                    var userAddress = checkoutRoot ? checkoutRoot.getAttribute('data-user-address') || '' : '';\n                    var userCity = '';\n                    var normalizedUserCity = '';\n                    var yandexApiKey = '5d0f0a04-cea3-40ff-940e-5a97428fad05';\n\n                    function activate(type) {\n                        var hasMatch = false;\n                        deliveryButtons.forEach(function (button) {\n                            var isActive = button.dataset.delivery === type;\n                            button.classList.toggle('delivery-option--active', isActive);\n                            button.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n                            if (isActive) {\n                                hasMatch = true;\n                            }\n                        });\n                        deliveryForms.forEach(function (form) {\n                            if (form.dataset.deliveryForm === type) {\n                                form.hidden = false;\n                            } else {\n                                form.hidden = true;\n                            }\n                        });\n                        if (deliveryTypeInput) {\n                            deliveryTypeInput.value = type;\n                        }\n                        if (!hasMatch && deliveryButtons.length) {\n                            activate(deliveryButtons[0].dataset.delivery);\n                        }\n                    }\n\n                    deliveryButtons.forEach(function (button) {\n                        button.addEventListener('click', function () {\n                            activate(button.dataset.delivery);\n                        });\n                    });\n\n                    if (deliveryButtons.length) {\n                        activate(deliveryButtons[0].dataset.delivery);\n                    }\n\n                    function getInputValue(input) {\n                        if (!input) { return ''; }\n                        return (input.value || '').trim();\n                    }\n\n                    function normalizeCityName(value) {\n                        if (value == null) { return ''; }\n                        var text = String(value).trim().toLowerCase();\n                        if (!text) { return ''; }\n                        text = text.replace(/^г\\.\\s*/, '');\n                        text = text.replace(/^город\\s+/, '');\n                        text = text.replace(/^р\\.п\\.\\s*/, '');\n                        text = text.replace(/^пос\\.\\s*/, '');\n                        return text.replace(/\\s+/g, ' ').trim();\n                    }\n\n                    function extractCityFromAddress(addressValue) {\n                        if (!addressValue) { return ''; }\n                        var value = String(addressValue).trim();\n                        if (!value) { return ''; }\n                        var match = value.match(/(?:г\\.|город)\\s*([A-Za-zА-Яа-яЁё\\-\\s]+)/i);\n                        if (match && match[1]) {\n                            return match[1].trim();\n                        }\n                        var parts = value.split(',').map(function (part) {\n                            return part.trim();\n                        }).filter(function (part) {\n                            return part.length > 0;\n                        });\n                        if (!parts.length) { return ''; }\n                        for (var i = 0; i < parts.length; i += 1) {\n                            var segment = parts[i];\n                            var lower = segment.toLowerCase();\n                            if (lower.indexOf('россия') !== -1) { continue; }\n                            if (lower.indexOf('обл') !== -1 || lower.indexOf('край') !== -1 || lower.indexOf('респ') !== -1) { continue; }\n                            if (lower.indexOf('район') !== -1) { continue; }\n                            return segment.replace(/^г\\.\\s*/i, '').replace(/^город\\s+/i, '').trim();\n                        }\n                        return parts[0].replace(/^г\\.\\s*/i, '').replace(/^город\\s+/i, '').trim();\n                    }\n\n                    function filterFeaturesByCity(features) {\n                        if (!Array.isArray(features)) { return []; }\n                        if (!normalizedUserCity) {\n                            return features.slice();\n                        }\n                        var matches = [];\n                        for (var i = 0; i < features.length; i += 1) {\n                            var feature = features[i];\n                            if (!feature || !feature.properties) { continue; }\n                            var props = feature.properties;\n                            var featureCity = props.city || props.settlement || '';\n                            if (!featureCity && props.address) {\n                                featureCity = props.address.split(',')[0];\n                            } else if (!featureCity && props.hintContent) {\n                                featureCity = props.hintContent.split(',')[0];\n                            }\n                            var normalized = normalizeCityName(featureCity);\n                            if (normalized && normalized === normalizedUserCity) {\n                                matches.push(feature);\n                            }\n                        }\n                        return matches.length ? matches : features.slice();\n                    }\n\n                    userCity = extractCityFromAddress(userAddress);\n                    normalizedUserCity = normalizeCityName(userCity);\n\n                    function ensureYandexMaps(callback) {\n                        if (window.ymaps && typeof window.ymaps.ready === 'function') {\n                            window.ymaps.ready(function () {\n                                callback(window.ymaps);\n                            });\n                            return;\n                        }\n                        if (mapScriptLoading) {\n                            doc.addEventListener('pickup-map-loaded', function onReady() {\n                                doc.removeEventListener('pickup-map-loaded', onReady);\n                                ensureYandexMaps(callback);\n                            });\n                            return;\n                        }\n                        mapScriptLoading = true;\n                        var script = doc.createElement('script');\n                        var scriptSrc = 'https://api-maps.yandex.ru/2.1/?';\n                        if (yandexApiKey) {\n                            scriptSrc += 'apikey=' + encodeURIComponent(yandexApiKey) + '&';\n                        }\n                        scriptSrc += 'lang=ru_RU';\n                        script.src = scriptSrc;\n                        script.async = true;\n                        script.onload = function () {\n                            mapScriptLoading = false;\n                            doc.dispatchEvent(new Event('pickup-map-loaded'));\n                            ensureYandexMaps(callback);\n                        };\n                        script.onerror = function () {\n                            mapScriptLoading = false;\n                            console.error('Не удалось загрузить Yandex Maps');\n                        };\n                        doc.head.appendChild(script);\n                    }\n\n                    function ensurePickupPoints(callback) {\n                        if (allPickupPoints) {\n                            callback(allPickupPoints);\n                            return;\n                        }\n                        fetch('/static/5post-points.json', { credentials: 'same-origin' })\n                            .then(function (response) {\n                                if (!response.ok) {\n                                    throw new Error('failed to load points');\n                                }\n                                return response.json();\n                            })\n                            .then(function (points) {\n                                allPickupPoints = points;\n                                filteredPickupFeatures = [];\n                                callback(points);\n                            })\n                            .catch(function (error) {\n                                console.error(error);\n                                callback(null);\n                            });\n                    }\n\n                    function initializeMap() {\n                        if (!mapCanvas || !window.ymaps) {\n                            return Promise.resolve(null);\n                        }\n                        if (mapInstance) {\n                            if (mapInstance.container) {\n                                mapInstance.container.fitToViewport();\n                            }\n                            return Promise.resolve(mapInstance);\n                        }\n                        mapInstance = new window.ymaps.Map(mapCanvas, {\n                            center: defaultCenter,\n                            zoom: defaultZoom,\n                            controls: ['zoomControl', 'geolocationControl']\n                        });\n                        objectManager = new window.ymaps.ObjectManager({\n                            clusterize: true,\n                            gridSize: 64,\n                            clusterDisableClickZoom: false\n                        });\n                        mapInstance.geoObjects.add(objectManager);\n                        objectManager.objects.events.add('click', function (event) {\n                            var objectId = event.get('objectId');\n                            if (objectId !== undefined && objectId !== null) {\n                                focusPointById(objectId, true);\n                            }\n                        });\n                        return Promise.resolve(mapInstance);\n                    }\n\n                    function renderPickupPoints(features) {\n                        if (!objectManager || !mapInstance) { return; }\n                        var prepared = filterFeaturesByCity(features || []);\n                        filteredPickupFeatures = prepared.slice();\n                        objectManager.removeAll();\n                        if (!prepared.length) {\n                            selectedPointId = null;\n                            updateSelectionDisplay(null);\n                            if (pickupSelectedText) {\n                                var message = userCity\n                                    ? ('Пункты выдачи 5post недоступны в городе ' + userCity)\n                                    : 'Пункты выдачи 5post временно недоступны';\n                                pickupSelectedText.textContent = message;\n                                pickupSelectedText.classList.add('delivery-form__hint--error');\n                            }\n                            mapInstance.setCenter(defaultCenter, defaultZoom);\n                            return;\n                        }\n                        var collection = {\n                            type: 'FeatureCollection',\n                            features: prepared\n                        };\n                        objectManager.add(collection);\n                        if (window.ymaps && window.ymaps.geoQuery) {\n                            var bounds = window.ymaps.geoQuery(collection).getBounds();\n                            if (bounds) {\n                                mapInstance.setBounds(bounds, { checkZoomRange: true, zoomMargin: 40 });\n                                return;\n                            }\n                        }\n                        var first = prepared[0];\n                        if (first && first.geometry && Array.isArray(first.geometry.coordinates)) {\n                            mapInstance.setCenter(first.geometry.coordinates, 12);\n                        }\n                    }\n\n                    function formatPointLabel(feature) {\n                        if (!feature || !feature.properties) { return 'Пункт выдачи'; }\n                        var city = feature.properties.city || '';\n                        var address = feature.properties.address || feature.properties.hintContent || feature.properties.balloonContentBody || feature.properties.balloonContentHeader || '';\n                        if (address && city && address.indexOf(city) === -1) {\n                            return city + ', ' + address;\n                        }\n                        return address || city || 'Пункт выдачи';\n                    }\n\n                    function updateSelectionDisplay(feature) {\n                        var label = feature ? formatPointLabel(feature) : '';\n                        if (pickupTrigger) {\n                            pickupTrigger.textContent = label ? ('Выбрано: ' + label) : pickupTriggerDefault;\n                        }\n                        if (pickupSelectedText) {\n                            pickupSelectedText.textContent = label ? label : pickupSelectedDefault;\n                            pickupSelectedText.classList.remove('delivery-form__hint--error');\n                        }\n                        if (pickupValueField) {\n                            pickupValueField.value = label;\n                        }\n                        if (pickupSubmitInput) {\n                            pickupSubmitInput.value = label;\n                        }\n                    }\n\n                    function clearSelectedPoint(messageIsError) {\n                        selectedPointId = null;\n                        updateSelectionDisplay(null);\n                        if (messageIsError && pickupSelectedText) {\n                            pickupSelectedText.textContent = 'Выберите пункт выдачи, чтобы продолжить оформление заказа';\n                            pickupSelectedText.classList.add('delivery-form__hint--error');\n                        }\n                    }\n\n                    function selectPoint(feature, options) {\n                        if (!feature) { return; }\n                        selectedPointId = feature.id;\n                        updateSelectionDisplay(feature);\n                        if (mapInstance && feature.geometry && Array.isArray(feature.geometry.coordinates)) {\n                            mapInstance.setCenter(feature.geometry.coordinates, 13);\n                        }\n                        if (objectManager && !(options && options.fromMap)) {\n                            objectManager.objects.balloon.open(feature.id);\n                        }\n                        if (options && options.fromMap) {\n                            closeMapOverlay();\n                        }\n                    }\n\n                    function findFeatureById(id) {\n                        var target = String(id);\n                        var pools = [];\n                        if (Array.isArray(filteredPickupFeatures) && filteredPickupFeatures.length) {\n                            pools.push(filteredPickupFeatures);\n                        }\n                        if (allPickupPoints && Array.isArray(allPickupPoints.features)) {\n                            pools.push(allPickupPoints.features);\n                        }\n                        for (var p = 0; p < pools.length; p += 1) {\n                            var list = pools[p];\n                            if (!Array.isArray(list)) { continue; }\n                            for (var i = 0; i < list.length; i += 1) {\n                                if (String(list[i].id) === target) {\n                                    return list[i];\n                                }\n                            }\n                        }\n                        return null;\n                    }\n\n                    function focusPointById(id, fromMap) {\n                        var feature = findFeatureById(id);\n                        if (!feature) { return; }\n                        selectPoint(feature, fromMap ? { fromMap: true } : null);\n                        if (objectManager && !fromMap) {\n                            objectManager.objects.balloon.open(feature.id);\n                        }\n                    }\n\n                    function openMapOverlay() {\n                        if (!mapOverlay) { return; }\n                        mapOverlay.hidden = false;\n                        mapOverlay.setAttribute('aria-hidden', 'false');\n                        body.classList.add(modalClass);\n                        ensureYandexMaps(function () {\n                            ensurePickupPoints(function (points) {\n                                if (!points) { return; }\n                                initializeMap().then(function () {\n                                    var features = (points && Array.isArray(points.features)) ? points.features : [];\n                                    renderPickupPoints(features);\n                                    if (selectedPointId != null) {\n                                        focusPointById(selectedPointId, false);\n                                    }\n                                    if (mapInstance && mapInstance.container) {\n                                        mapInstance.container.fitToViewport();\n                                    }\n                                });\n                            });\n                        });\n                    }\n\n                    function closeMapOverlay() {\n                        if (!mapOverlay) { return; }\n                        mapOverlay.hidden = true;\n                        mapOverlay.setAttribute('aria-hidden', 'true');\n                        body.classList.remove(modalClass);\n                    }\n\n                    if (pickupTrigger) {\n                        pickupTrigger.addEventListener('click', function (event) {\n                            event.preventDefault();\n                            openMapOverlay();\n                        });\n                    }\n\n                    if (mapCloseElements.length && mapOverlay) {\n                        mapCloseElements.forEach(function (element) {\n                            element.addEventListener('click', function (event) {\n                                event.preventDefault();\n                                closeMapOverlay();\n                            });\n                        });\n                        doc.addEventListener('keydown', function (event) {\n                            if (event.key === 'Escape' && !mapOverlay.hidden) {\n                                closeMapOverlay();\n                            }\n                        });\n                    }\n\n                    if (orderForm) {\n                        orderForm.addEventListener('submit', function (event) {\n                            var type = deliveryTypeInput ? deliveryTypeInput.value : '';\n                            if (type === 'pickup' && (!pickupSubmitInput || !pickupSubmitInput.value)) {\n                                event.preventDefault();\n                                clearSelectedPoint(true);\n                                if (pickupTrigger) {\n                                    pickupTrigger.focus();\n                                }\n                                return;\n                            }\n\n                            var details = collectCustomerDetails(type);\n                            if (!details.valid) {\n                                event.preventDefault();\n                                if (details.focus && typeof details.focus.focus === 'function') {\n                                    details.focus.focus();\n                                }\n                                return;\n                            }\n\n                            if (orderFirstNameInput) {\n                                orderFirstNameInput.value = details.firstName;\n                            }\n                            if (orderLastNameInput) {\n                                orderLastNameInput.value = details.lastName;\n                            }\n                            if (orderEmailInput) {\n                                orderEmailInput.value = details.email;\n                            }\n                            if (orderPhoneInput) {\n                                orderPhoneInput.value = details.phone;\n                            }\n                            if (orderAddressInput) {\n                                orderAddressInput.value = details.address;\n                            }\n                        });\n                    }\n\n                    function collectCustomerDetails(type) {\n                        var result = {\n                            valid: true,\n                            focus: null,\n                            firstName: '',\n                            lastName: '',\n                            email: '',\n                            phone: '',\n                            address: ''\n                        };\n                        var requiredFields = [];\n\n                        if (type === 'pickup') {\n                            result.firstName = getInputValue(pickupFirstNameInput);\n                            result.lastName = getInputValue(pickupLastNameInput);\n                            result.email = getInputValue(pickupEmailInput);\n                            result.phone = getInputValue(pickupPhoneInput);\n                            result.address = pickupSubmitInput ? pickupSubmitInput.value : '';\n                            requiredFields = [\n                                { value: result.firstName, input: pickupFirstNameInput },\n                                { value: result.lastName, input: pickupLastNameInput },\n                                { value: result.email, input: pickupEmailInput },\n                                { value: result.phone, input: pickupPhoneInput }\n                            ];\n                        } else if (type === 'courier') {\n                            result.firstName = getInputValue(courierFirstNameInput);\n                            result.lastName = getInputValue(courierLastNameInput);\n                            result.email = getInputValue(courierEmailInput);\n                            result.phone = getInputValue(courierPhoneInput);\n                            result.address = getInputValue(courierAddressInput);\n                            requiredFields = [\n                                { value: result.firstName, input: courierFirstNameInput },\n                                { value: result.lastName, input: courierLastNameInput },\n                                { value: result.email, input: courierEmailInput },\n                                { value: result.phone, input: courierPhoneInput },\n                                { value: result.address, input: courierAddressInput }\n                            ];\n                        } else {\n                            result.firstName = getInputValue(postFirstNameInput);\n                            result.lastName = getInputValue(postLastNameInput);\n                            result.email = getInputValue(postEmailInput);\n                            result.phone = getInputValue(postPhoneInput);\n                            result.address = getInputValue(postAddressInput);\n                            requiredFields = [\n                                { value: result.firstName, input: postFirstNameInput },\n                                { value: result.lastName, input: postLastNameInput },\n                                { value: result.email, input: postEmailInput },\n                                { value: result.phone, input: postPhoneInput },\n                                { value: result.address, input: postAddressInput }\n                            ];\n                        }\n\n                        for (var i = 0; i < requiredFields.length; i += 1) {\n                            if (!requiredFields[i].value) {\n                                result.valid = false;\n                                result.focus = requiredFields[i].input;\n                                break;\n                            }\n                        }\n\n                        return result;\n                    }\n                })();\n            </script></body></html>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
